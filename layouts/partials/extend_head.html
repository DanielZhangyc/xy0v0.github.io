<!-- lightGallery -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/css/lightgallery-bundle.min.css">
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/lightgallery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script>
<script>
    window.addEventListener('load', function() {
        document.querySelectorAll('.post-content img').forEach(el => {
            if (!el.closest('a')) {  // 如果图片不在链接内
                let wrapper = document.createElement('a');
                wrapper.href = el.src;
                wrapper.dataset.src = el.src;
                el.parentNode.insertBefore(wrapper, el);
                wrapper.appendChild(el);
            }
        });

        // 初始化 lightGallery
        const galleries = document.querySelectorAll('.post-content');
        galleries.forEach(gallery => {
            lightGallery(gallery, {
                selector: 'a',
                plugins: [lgZoom, lgThumbnail],
                speed: 500,
                download: false,
                thumbnail: true,
                animateThumb: true,
                zoomFromOrigin: true,
                allowMediaOverlap: true,
                toggleThumb: true
            });
        });
    });
</script>

{{ if .Site.Params.fancybox }}
<!-- fancybox -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css" />
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
<script>
    window.addEventListener('load', function() {
        Fancybox.bind('[data-fancybox="gallery"]', {
            // 自定义选项
            Toolbar: {
                display: [
                    "zoom",
                    "slideshow",
                    "fullscreen",
                    "close"
                ]
            }
        });
    });
</script>
{{ end }} 