{{if .Page.Site.Params.lightgallery }}
<!-- lightgallery -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/css/lightgallery-bundle.min.css">
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/lightgallery.min.js"></script>

<!-- Initialize -->
<script>
window.addEventListener('load', function() {
    // 获取当前页面所有图片
    const images = document.querySelectorAll('.post-content img');
    if (images.length > 0) {
        // 为每个图片添加父元素和data属性
        images.forEach(function(img) {
            const container = document.createElement('a');
            container.href = img.src;
            container.setAttribute('data-src', img.src);
            img.parentNode.insertBefore(container, img);
            container.appendChild(img);
        });
        
        // 初始化 lightGallery
        const galleries = document.querySelectorAll('.post-content');
        galleries.forEach(function(gallery) {
            lightGallery(gallery, {
                selector: 'a',
                licenseKey: 'your-license-key',
                speed: 500,
                thumbnail: false,
                controls: false,
                closeOnTap: true,
                counter: false,
                download: true,
                showZoomInOutIcons: false
            });
        });
    }
});
</script>
{{ end }} 