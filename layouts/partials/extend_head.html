{{if .Page.Site.Params.lightgallery }}
<!-- lightgallery -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/css/lightgallery-bundle.min.css">
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/lightgallery.min.js"></script>

<!-- Initialize -->
<script>
window.addEventListener('load', function() {
    // 获取当前文章的图片
    const articles = document.querySelectorAll('.post-single');
    articles.forEach(function(article) {
        const images = article.querySelectorAll('.post-content img');
        if (images.length > 0) {
            // 为每个图片添加父元素和data属性
            images.forEach(function(img) {
                const container = document.createElement('a');
                container.href = img.src;
                container.setAttribute('data-src', img.src);
                img.parentNode.insertBefore(container, img);
                container.appendChild(img);
            });
            
            // 初始化 lightGallery
            lightGallery(article.querySelector('.post-content'), {
                selector: 'a',
                controls: false,
                thumbnail: false,
                escKey: true,
                hideScrollbar: true,
                counter: false
            });
        }
    });
});
</script>
{{ end }} 